from __future__ import annotations

from typing import Any, Self

type IntoExpr = Expr | str | int | float | bool | None

def lit(value: Any) -> Expr: ...
def element() -> Expr: ...
def list() -> ExprListNameSpace: ...
def struct() -> ExprStructNameSpace: ...
def field(name: str) -> Expr: ...

class LazyQuery:
    def collect(self) -> Any: ...
    def to_bytes(self) -> bytes: ...

class DataJson:
    def __init__(self, data: Any) -> None: ...
    def query(self, expr: Expr) -> LazyQuery: ...
    @classmethod
    def from_bytes(cls, bytes_data: bytes) -> DataJson: ...

class ExprListNameSpace:
    def get(self, i: int) -> Expr: ...
    def flatten(self) -> Expr: ...
    def reverse(self) -> Expr: ...
    def length(self) -> Expr: ...
    def join(self, glue: str) -> Expr: ...
    def map(self, expr: Expr) -> Expr: ...
    def filter(self, cond: Expr) -> Expr: ...
    def contains(self, other: IntoExpr) -> Expr: ...

class ExprStrNameSpace:
    def length(self) -> Expr: ...
    def contains(self, other: str) -> Expr: ...
    def starts_with(self, other: str) -> Expr: ...
    def ends_with(self, other: str) -> Expr: ...
    def reverse(self) -> Expr: ...

class ExprStructNameSpace:
    def field(self, name: str) -> Expr: ...
    def keys(self) -> Expr: ...
    def values(self) -> Expr: ...

class Expr:
    @property
    def list(self) -> ExprListNameSpace: ...
    @property
    def str(self) -> ExprStrNameSpace: ...
    @property
    def struct(self) -> ExprStructNameSpace: ...
    def eq(self, other: IntoExpr) -> Self: ...
    def ne(self, other: IntoExpr) -> Self: ...
    def and_(self, other: Expr) -> Self: ...
    def or_(self, other: Expr) -> Self: ...
    def not_(self) -> Self: ...
